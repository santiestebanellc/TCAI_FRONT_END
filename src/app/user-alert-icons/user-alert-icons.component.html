<div class="flex items-center space-x-4 pt-4">
  <!-- Notification Button with Badge -->
  <div class="relative">
    <!-- Botón de alerta -->
    <button
      (click)="toggleDropdown()"
      class="w-12 h-12 lg:w-14 lg:h-14 bg-red-500 rounded-full flex items-center justify-center text-white hover:bg-red-600 transition-colors duration-200 nav-style"
    >
      <img src="assets/alert-icon.svg" alt="Frame" />
    </button>

    <!-- Badge de número de alertas -->
    <span
      *ngIf="alertCount > 0"
      class="absolute top-0 right-0 bg-yellow-400 text-black text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center transform translate-x-2 -translate-y-2"
    >
      {{ alertCount }}
    </span>

    <!-- Dropdown con las alertas -->
    <div
      *ngIf="showDropdown"
      class="absolute right-0 mt-2 w-80 bg-white border border-gray-300 rounded-lg shadow-lg z-50"
    >
      <div
        class="p-2 text-sm text-gray-700 font-semibold font-montserrat border-b flex justify-between px-3"
      >
        Alertes
        <!-- Arrow -->
        <a
          routerLink="alerts"
          routerLinkActive="active"
          class="flex flex-col items-center"
        >
          <span class="justify-self-end mb-1 hover:opacity-50 cursor-pointer">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="16px"
              fill="#1f1f1f"
            >
              <path d="m321-80-71-71 329-329-329-329 71-71 400 400L321-80Z" />
            </svg>
          </span>
        </a>
      </div>
      <ul class="max-h-60 overflow-y-auto">
        <li *ngIf="alertas.length === 0" class="p-2 text-gray-500">
          No hi ha alertes.
        </li>
        <li
          *ngFor="let alerta of alertas"
          class="p-3 hover:bg-gray-100 cursor-pointer"
        >
          <div class="font-semibold text-red-600">
            #{{ alerta.room }}, {{ alerta.paciente_nombre }}
          </div>
          <div
            class="text-sm mt-1 text-gray-700"
            *ngFor="let a of alerta.alertas"
          >
            • {{ a.mensaje }}
          </div>
          <div class="text-xs text-gray-400 mt-1">
            {{ alerta.fecha }}
          </div>
        </li>
      </ul>
    </div>
  </div>

  <!-- Profile Card -->
  <div
    class="flex items-center space-x-3 px-2 lg:px-4 py-2 bg-white rounded-full border border-gray-200"
  >
    <img
      src="https://openclipart.org/download/247320/abstract-user-flat-4.svg"
      alt="Profile Picture"
      class="w-12 h-12 lg:w-14 lg:h-14 rounded-full object-cover border border-gray-300"
    />
    <div class="hidden lg:block">
      <h3 class="text-sm font-semibold text-gray-900">{{ nombre }}</h3>
      <p class="text-xs text-gray-500">{{ numTrabajador }}</p>
    </div>
  </div>
</div>
